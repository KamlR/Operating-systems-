# Мавлетова Карина Радиковна, БПИ216, Вариант 15
## 9-10 баллов 
### 9 баллов: В дополнение к программам на предыдущие оценки необходимо разработать приложение, позволяющее отключать и подключать различных клиентов с сохранением работоспособности сервера. 
### 10 баллов: Расширить предыдущую программу таким образом, чтобы при завершении работы сервера происходило корректное завершение работы всех подключенных клиентов.

**Условие задачи:**

*Задача о клумбе – 1. На клумбе растет 40 цветов, за ними непрерывно следят два процесса–садовника и поливают увядшие цветы, при этом оба садовника очень боятся полить один и тот же
цветок, который еще не начал вянуть. Создать приложение,
моделирующее состояния цветков на клумбе и действия
садовников. Сервер используется для изменения состояния цветов, каждый садовник — отдельный клиент.*

### Про файлы:
- В папке code:
    - server.c - код сервера, который решает, какие цветы поливать
    - client1.c - код первого клиента (садовника)
    - client2.c - код второго клиента (садовника)
    - есть два файла info1.c и info2.c, которые подключаются к серверу для отображения комплексной информации. Для примера я прикрепила код с двумя клиентами, но он одинаковый, так как они должны аналогично работать. Можно подключить и больше 2 клиентов.
- Сслыка на видео с демонстрацией работы программы:
    https://disk.yandex.lv/i/G1JWkUY1_o7G8Q
### Как запускать:
Для начала запускается сервер. Далее он сообщает о том, что ждёт клиентов для подключения. Потом запускается первый сад, за ним второй. После них подключаются info клиенты, которые будут отображать всю информацию о работе приложения. Кол-во подключаемых info клиентов передаётся серверу вторым аргументом командной строки.

### Критерии:

#### :white_check_mark: Представлен сценарий решаемой задачи:
В моей задаче в качестве сервера выстпупает сад. Сервер изменяет состояние цветов, т.е решает, какие из них следует полить в очередной день. А вот клиенты - два садовника, которые занимаются поливкой.
Всего есть пять дней полива. В каждый из пяти дней сервер рандомно выбирает цветы, которые нужно поливать. Цветы для полива обозначаются 0. После сервер посылает данные о поливке
цветов первому клиенту (отправляется массив char по tcp). Он в свою очередь запоминает номера цветов, которые полил в массив int. Данный массив направляется серверу. Со вторым клиентом (садовником) такая же история. Когда сервер получает от клиентов номера политых цветов - он отправляет массив int с этими номерами info клиентам. Кол-во этих info клиентов передаётся программе сервера через аргументы командной строки. Создаются массивы, которые будут хранить информацию о данных клиентах. Соотв. сервер в цикле передаёт номера политых цветов первым и вторым садовником каждому info клиенту. Те в свою очередь отображают комплекссную информацию о работе программы.
##### Про отключение info клиентов:
Чтобы была возможность отключить info клиентов, в терминале сервера нужно прописать ctrl+c. В таком случае будет вызвана функция обработки соотв. сигнала. В ней у пользователя есть возможность выбрать, какого info клиента следует отключить, просто введя соотв. номер. За один вызов cttl+c можно отключить только одного клиента. При отключении какого-то info клиента остальные корректно продолжают выводить информацию.
##### Про подключение info клиентов:
Чтобы снова подключить info клиента нужно в терминале сервера написать ctrl+c. Вызовется соотв. функция, где нужно будет ввести -2 для подключения. Программу подключаемого info клиента нужно будет снова запустить в отдельном терминале, так как при отключении info клиента его программа завершается. Если какой-то info клиент отключился на 1 дне полива, а заново подключился только на 3, то вывод информации начнётся, как и должен именно с 3 дня.
##### Про завершение работы сервера:
Чтобы отключить сервер можно так же прописать ctrl+c в его терминале. В таком случае вызывается функция обработки данного сигнала. Чтобы завершить работу сервера нужно ввести -1. После этого все клиенты и сервер корректно завершат свою работу.
##### Итог:
- Если хотим завершить работу сервера, то в его терминале вводим ctrl+c, далее -1.
- Если хотим отключить info клиента, то в терминале сервера вводим ctrl+c, далее номер отключаемого info клиента.
- Если хотим подключить снова info клиента, то в терминале сервера вводим ctrl+c, далее -2 и в терминале подключаемого info клиента запускаем программу снова.


#### :white_check_mark: При запуске программ требуемые для их работы IP адреса и порты необходимо задавать в командной строке, чтобы обеспечить гибкую подстройку к любой сети:
- сервер получает через аргументы командной строки номер порта и кол-во info клиентов, которые будут отображать комплексеую информацию
- 1 клиент получает через аргументы командной строки номер порта и ip
- 2 клиент получает через аргументы командной строки номер порта и ip
- info клиенты получают через аргументы командной строки номер порта и ip

#### :white_check_mark: Разработанное приложение должно работать как на одном компьютере так и в распределенном (сетевом) режиме на нескольких компьютерах, по которым можно будет разнести серверы и клиентов.

#### :white_check_mark: Завершение работы клиентов и серверов на данном этапе не оговаривается. Но оно должно быть представлено в сценарии:
- Клиенты и сервер заканчивают свою работу после 5 дней полива.
- Клиенты и сервер завершают свою работу при отключении сервера.

