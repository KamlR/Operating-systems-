# Программа на 4 балла:

## Выполнено Мавлетовой Кариной Радиковной, БПИ216, Вариант 15
### Условие задачи:
*Задача о клумбе – 1. На клумбе растет 40 цветов, за ними непрерывно следят два процесса–садовника и поливают увядшие цветы,
при этом оба садовника очень боятся полить один и тот же цветок, который еще не начал вянуть. Создать приложение, моделирующее состояния цветков на клумбе и действия садовников. Для изменения состояния цветов создать отдельный
процесс (а не 40 процессов для каждого цветка), который может задавать одновременное начало увядания для нескольких цветков.*


#### :white_check_mark: Представлен сценарий решаемой задачи:
В моей задачи есть три процесса, если говорить на языке программирования, то родительский и два дочерних процесса. Теперь расскажу, для чего они предназначены. Родительский процесс
это сад, в котором посажено 40 цветов. Два дочерних процесса - это два садовника, которые следят за цветами в саду. Так как родительский создаёт сад из 40 цветков.
Есть специальная функция под названием changeArrayFlowers, которая решает в зависимости от рандомно сгенерированного числа, какие цветки завянут на текущий день.
Далее в дело вступают процессы-садовники. В моей задачи процесс выбора увядших цветов и процесс поливики происходят каждый день. Соответственно, как только наступил новый
день родитель решил, кто завянет, а садовники не дали это сделать и полили. 
*Теперь расскажу, как помогают семафоры и что вообще происходит:*
+ Родитель запускает два процесса-садовника.
+ Теперь наступает первый день, каждый день происходят описанные ниже действия.
+ Родитель решает, какие из 40 цветков надо будет подивать. Пока он это решает, процессы-садовники при помощи семафоров ждут.
+ Как только решено, что сегодня надо полить, родитель разблокирует первого садовника, а тот в свою очерель разблокирует второго.
+ Пока садовники поливают цветы - родительский процесс заблокирован при помощи семафоров.
+ Как только садовники закончили полив - наступает новый день и все шаги повторяются.
+ Всего поливка идёт 20 дней
+ Соотв. программа работет либо пока не пройдёт 20 дней полива, либо пока программа не прервётся при помощи сигнала.

#### :white_check_mark: Множество процессов взаимодействуют с использованием именованных POSIX семафоров. Обмен данными ведется через разделяемую память в стандарте POSIX.

На данном этапе я использую именованные семафоры POSIX для правильного взаимодействия работы сада и садовников по принципу:
+ Пока родительский процесс (сад) решает, какие цветы надо поливать - процессы-садовники ждут
+ Пока процессы-садовники поливают цветы - родительский процесс (сад) ждёт

Разделяемую память я использую для передачи дочерним процессам информации о том, какие цветы нужно поливать на текущий день.


#### :white_check_mark:  Реализовать завершение программы в соответствии с условием задачи, а также предусмотреть корректное завершение по прерыванию с клавиатуры по соответствующему сигналу.
В моей реализации ситуация следующая. Как уже писалось выше - каждый день выбираются цветы для полива и садовники этим занимаются. Всего таких дней для полива в моей программе 20.
Есть два варианта завершения программы:
<ol>
  <li>По истечению 20 дней полива программа завершится сама.</li>
  <li>Можно завершить программу после очередного дня полива при помощи ctrl+c. В программе есть обработчик данного сигнала, который корректно завершит работу.
  Во-первых, напечатает фразу о том, что сад прекратил свою работу, а, во-вторых, удалит семафоры и разделяемую память.</li>
</ol>

#### :white_check_mark:В программе предусмотреть удаление семафоров и разделяемой памяти по ее завершению любым из способов.
В моей программе есть два вида завершения: по истечению 20 дней полива и по сигналу ctrl+c. В обоих случаях удаляются семафоры и удаляется разделяемая память.
